version: 1
send_anonymous_usage_stats: false
project_id: "tap-grib"
default_environment: test
venv:
  backend: uv
environments:
  - name: test
plugins:
  extractors:
    - name: "tap-grib"
      namespace: "tap_grib"
      pip_url: -e .
      capabilities:
        - state
        - catalog
        - discover
        - about
        - stream-maps
      settings:
        - name: paths
          kind: array
          description: >
            List of GRIB file definitions. Each item is an object with:
              - path: GRIB file path or glob pattern
              - skip_fields: fields to exclude (optional)
              - primary_keys: primary keys for records (optional) defaults to [latitude, longitude, ts]
              - group_by: attributes to group messages into datasets (optional, example ["typeOfLevel"])
              - datasets_name: custom dataset names for this file (optional)
        - name: paths_file
          kind: string
          description: Path to a JSON file containing GRIB file definitions (same structure as
      config:
        paths:
          - path: ./data/test.grib
            # skip_fields: ["step", "valid_time"]
            # primary_keys: ["latitude", "longitude", "ts"]
            # group_by: ["typeOfLevel"]
            # datasets_name:
            #   - sealevels
            #   - ground

  loaders:
    - name: target-jsonl
      variant: andyh1203
      pip_url: target-jsonl
